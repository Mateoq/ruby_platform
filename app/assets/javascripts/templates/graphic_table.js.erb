prTemplates.directive('graphicTable', ['$sce', '$window', '$document', '$timeout', 'graphicService', function ($sce, $window, $document, $timeout, graphicService) {
	return {
		templateUrl: 'graphic_table.html',
		restrict: 'E',
		scope: {
			options: '=options'
		},
		link: function (scope, element, attrs) {
			scope.options.templateClass = 'graphic-table';

			if (!scope.options.hasOwnProperty('method')) return;

			scope.options.graphicData.atlasPath = scope.$root.resources + scope.options.graphicData.atlasMap;

			graphicService(scope.options.graphicData);

			var method = graphicService.methods[scope.options.method];
			
			graphicService[method]();
		}
	};
}]);