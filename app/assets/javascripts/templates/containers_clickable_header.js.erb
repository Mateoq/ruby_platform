prTemplates.directive('containersClickableHeader', ['updateProgressService', 'ngAudio', function (updateProgressService, ngAudio) {
	return {
		templateUrl: 'containers_clickable_header.html',
		restrict: 'E',
		scope: {
			options: '=options'
		},
		link: function (scope, iElement, iAttrs) {
			scope.options.templateClass = 'containers-clickable-header';

			var itemsCount = 0;

			angular.forEach(scope.options.containers, function(value, key){
				angular.forEach(value, function(item, k){
					itemsCount++;
					scope.options.containers[key][k].contentMainClass = "item-" + itemsCount;
					scope.options.containers[key][k].onHeaderClick = function (obj, $event) {
						console.log(scope.$root.resources + obj.audio);
						if (obj.hasOwnProperty('audio')) {
							if (scope.audio) {
								scope.audio.stop();
							}

							scope.audio = ngAudio.play(scope.$root.resources + obj.audio);
						}

						scope.options.containers[key][k].showContent = true;
					};
				});
			});
		}
	};
}])