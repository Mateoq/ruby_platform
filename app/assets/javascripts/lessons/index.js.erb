if ("introduction" === gon.action_name) {
	AppManager().configModule(app, {
		courseModule: gon.course_structure.course_name,
		resources: "/assets/" + gon.course_structure.grade + "/" + gon.course_structure.class_name + "/",
		headerImg: gon.course_structure.header_img,
		menuImg: gon.course_structure.menu_img,
		menuImgStyles: gon.course_structure.menu_img_styles
	});

	app.controller('homeCtrl', ['$scope', '$sce', 'iconsService', function ($scope, $sce, iconsService) {
		
		// console.log($scope);
	}]);
} else {
	AppManager().configModule(app, {
		id: gon.course_structure.lesson_id,
		resources: '/assets/' + gon.course_structure.resources,
        mediaResources: '/assets/' + gon.course_structure.resources + gon.course_app + '/',
		courseModule: gon.course_structure.course_name
	});
	angular.forEach(gon.lesson_structure, function (value, key) {
		// console.log(key);
		app.controller(value.url_name + 'Ctrl', ['$scope', '$sce', '$rootScope', function ($scope, $sce, $rootScope) {
			$scope.data = value.data;
			$scope.data.lessonName = value.name;
			$scope.data.className = gon.course_structure.class_name;
            $scope.data.type = value.pr_type;
            if (0 != value.pr_type) $scope.data.done = $scope.$root.lessonProgress[value.url_name].done;

            if (2 === value.pr_type) $scope.data.stage = $scope.$root.lessonProgress[value.url_name].stage;

			$scope.$on('$destroy', function () {
				if ($scope.$root.hasOwnProperty('game')) {
					$scope.$root.game.destroy(true);
					// $scope.$root.game = null;
				}

                $scope.$broadcast('destroySound');
			});
		}]);
	});
}